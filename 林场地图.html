<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—åœºåœ°å›¾</title>
    <!-- å¼•å…¥èµ„æº -->
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <link rel="stylesheet" href="./CSS/index.css">

    <script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode: "1a10f8f7cd10345c567260ccaae174f8",
        };
    </script>
    <script type="text/javascript"
        src="https://webapi.amap.com/maps?v=2.0&key=3cc80ebe7165e17a776d23fe5e1914a4&plugin=AMap.GeoJSON&plugin=AMap.Driving"></script>
    <script src="./js/store.js"></script>
    <style>
        :root {
            --primary-color: #2c5f2d;
            --secondary-color: #97bc62;
            --background: #f0f8f0;
        }

        /* åŸºç¡€æ ·å¼ */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--background);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* å¯¼èˆªæ æ ·å¼ */
        .nav-bar {
            width: 100%;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1001;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            color: var(--primary-color);
            font-size: 24px;
            font-weight: bold;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-link {
            color: var(--primary-color);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background-color: var(--background);
            transform: translateY(-2px);
        }

        .nav-link.active {
            background-color: var(--primary-color);
            color: white;
        }

        /* åœ°å›¾ç›¸å…³æ ·å¼ */
        .map-container {
            display: flex;
            flex: 1;
            position: relative;
        }

        #container {
            flex: 1;
            height: calc(100vh - 70px);
        }

        /* æ—åœºåˆ—è¡¨æ ·å¼ */
        #forest-list {
            width: 250px;
            background-color: white;
            border-right: 1px solid #ddd;
            overflow-y: auto;
            height: calc(100vh - 70px);
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
        }

        .forest-list-header {
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
            border-bottom: 1px solid #ddd;
            background-color: #f8fff8;
        }

        .forest-list-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: white;
        }

        .forest-list-item:hover {
            background-color: #f8fff8;
            transform: translateX(5px);
        }

        .forest-list-item h3 {
            margin: 0 0 5px;
            font-size: 14px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .forest-list-item p {
            margin: 0;
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }
    </style>
</head>

<body>
    <!-- å¯¼èˆªæ  -->
    <div class="nav-bar">
        <div class="nav-container">
            <a href="é¦–é¡µ.html" class="nav-logo">
                ğŸŒ² æ£®æ—å•æœ¨ç›®æ ‡æ£€æµ‹
            </a>
            <div class="nav-links">
                <a href="é¦–é¡µ.html" class="nav-link">é¦–é¡µ</a>
                <a href="æ—åœºåœ°å›¾.html" class="nav-link active">æ—åœºåœ°å›¾</a>
                <a href="å›¾ç‰‡æ£€æµ‹.html" class="nav-link">å›¾ç‰‡æ£€æµ‹</a>
                <a href="ç®—æ³•å¯¹æ¯”.html" class="nav-link">ç®—æ³•å¯¹æ¯”</a>
                <a href="æ”¿ç­–è§£è¯».html" class="nav-link">æ”¿ç­–è§£è¯»</a>
                <a href="å‘å±•æ–¹å‘.html" class="nav-link">å‘å±•æ–¹å‘</a>
                <a href="https://yuanqi.tencent.com/agent/jOoj7nGdYJoo" class="nav-link">AIé—®ç­”</a>
    
            </div>
        </div>
    </div>

    <div class="map-container">
        <div id="forest-list">
            <div class="forest-list-header">æ—åœºåˆ—è¡¨</div>
            <div class="forest-list-content">
                <!-- æ—åœºä¿¡æ¯å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        <div id="container"></div>
    </div>

    <div class="container">
        <script type="text/javascript">
            // åˆ›å»ºåœ°å›¾å¯¹è±¡
            const map = new AMap.Map("container", {
                viewMode: '3D', // é»˜è®¤ä½¿ç”¨ 3D æ¨¡å¼
                zoom: 5, // åœ°å›¾çº§åˆ«
                center: [105.397428, 32.90923], // åœ°å›¾ä¸­å¿ƒç‚¹
                pitch: 45
            });

            // ä½¿ç”¨æ§ä»¶
            AMap.plugin(['AMap.ToolBar', 'AMap.Scale', 'AMap.HawkEye', 'AMap.MapType', 'AMap.ControlBar', 'AMap.MoveAnimation'], function () {
                var toolbar = new AMap.ToolBar({
                    position: {
                        top: '200px',
                        right: '20px',
                    }
                }); // ç¼©æ”¾å·¥å…·æ¡å®ä¾‹åŒ–
                var scale = new AMap.Scale();
                var hawkeye = new AMap.HawkEye();
                var maptype = new AMap.MapType();
                var controlbar = new AMap.ControlBar();

                map.addControl(toolbar); // æ·»åŠ æ§ä»¶
                map.addControl(scale);
                map.addControl(hawkeye);
                map.addControl(maptype);
                map.addControl(controlbar);
            });

            // æ—åœºä½ç½®æ•°æ®åŠä»‹ç»
            const forests = [
                {
                    name: 'é»‘é¾™æ±Ÿçœå¤§å…´å®‰å²­åœ°åŒºæ¼ æ²³å¿è¥¿æ—å‰æ—ä¸šå±€å¤è²æ—åœº',
                    position: [122.566111, 53.004722],
                    iconUrl: './img/1.png',
                    description: 'ä½äºå¤§å…´å®‰å²­æ·±å¤„ï¼Œæ˜¯ä¸­å›½æœ€åŒ—ç«¯çš„æ—åœºä¹‹ä¸€ï¼Œä»¥åŸå§‹æ£®æ—å’Œä¸°å¯Œçš„åŠ¨æ¤ç‰©èµ„æºè‘—ç§°ã€‚'
                },
                {
                    name: 'é•¿ç™½å±±æ¸©å¸¦è½å¶é’ˆé˜”æ··äº¤æ—æ—åœº',
                    position: [126.642464, 45.756967],
                    iconUrl: './img/2.jpg',
                    description: 'é•¿ç™½å±±æ—åœºæ˜¯ä¸­å›½ä¸œåŒ—åœ°åŒºçš„é‡è¦ç”Ÿæ€ä¿æŠ¤åŒºï¼Œæ‹¥æœ‰ä¸°å¯Œçš„æ¸©å¸¦æ£®æ—ç”Ÿæ€ç³»ç»Ÿã€‚'
                },
                {
                    name: 'å—äº¬æ—ä¸šå¤§å­¦ä¸‹èœ€æ—åœº',
                    position: [119.218001, 32.120048],
                    iconUrl: './img/3.jpg',
                    description: 'ä¸‹èœ€æ—åœºæ˜¯å—äº¬æ—ä¸šå¤§å­¦çš„å®éªŒæ—åœºï¼Œä¸»è¦ç”¨äºæ•™å­¦å’Œç§‘ç ”æ´»åŠ¨ã€‚'
                },
                {
                    name: 'æ²³åŒ—çœå¡ç½•åæœºæ¢°æ—åœº',
                    position: [116.683333, 41.933333],
                    iconUrl: './img/4.jpg',
                    description: 'å¡ç½•åæ—åœºæ˜¯ä¸­å›½åŒ—æ–¹è‘—åçš„ç”Ÿæ€ä¿®å¤å·¥ç¨‹ï¼Œç»è¿‡å‡ åå¹´çš„åŠªåŠ›ï¼Œä»è’æ¼ å˜æˆäº†ç»¿æ´²ã€‚'
                },
                {
                    name: 'å†…è’™å¤è‡ªæ²»åŒºæµ‘å–„è¾¾å…‹æ²™åœ°æ—åœº',
                    position: [113.116667, 43.850000],
                    iconUrl: './img/5.jpg',
                    description: 'ä½äºæµ‘å–„è¾¾å…‹æ²™åœ°ï¼Œæ˜¯é˜²é£å›ºæ²™çš„é‡è¦æ—åœºã€‚'
                },
                {
                    name: 'é’æµ·çœæ¹Ÿæ°´æµåŸŸæ—åœº',
                    position: [101.783333, 36.616667],
                    iconUrl: './img/6.jpg',
                    description: 'æ¹Ÿæ°´æµåŸŸæ—åœºæ˜¯é’æµ·é‡è¦çš„ç”Ÿæ€ä¿æŠ¤åŒºï¼Œå¯¹ç»´æŒå½“åœ°ç”Ÿæ€å¹³è¡¡å…·æœ‰é‡è¦æ„ä¹‰ã€‚'
                },
                {
                    name: 'å¹¿è¥¿å£®æ—è‡ªæ²»åŒºå›½æœ‰ä¸ƒå¡æ—åœº',
                    position: [108.383333, 22.783333],
                    iconUrl: './img/7.jpg',
                    description: 'ä¸ƒå¡æ—åœºæ˜¯å¹¿è¥¿é‡è¦çš„å›½æœ‰æ—åœºï¼Œä»¥äºšçƒ­å¸¦å¸¸ç»¿é˜”å¶æ—ä¸ºä¸»ã€‚'
                },
                {
                    name: 'äº‘å—çœè¥¿åŒç‰ˆçº³å‚£æ—è‡ªæ²»å·æ—åœº',
                    position: [100.800000, 22.020000],
                    iconUrl: './img/8.jpg',
                    description: 'è¥¿åŒç‰ˆçº³æ—åœºæ˜¯ä¸­å›½çƒ­å¸¦é›¨æ—çš„é‡è¦ä»£è¡¨ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„ç”Ÿç‰©å¤šæ ·æ€§ã€‚'
                },
                {
                    name: 'è¥¿è—è‡ªæ²»åŒºæ—èŠåœ°åŒºæ—åœº',
                    position: [94.370000, 29.680000],
                    iconUrl: './img/10.jpg',
                    description: 'æ—èŠæ—åœºä½äºè¥¿è—ä¸œå—éƒ¨ï¼Œæ˜¯é‡è¦çš„ç”Ÿæ€ä¿æŠ¤åŒºåŸŸã€‚'
                },
                {
                    name: 'èŒ‚å¿æš–æ¸©å¸¦è½å¶é’ˆå¶æ··äº¤æ—æ—åœº',
                    position: [103.823557, 36.058039],
                    iconUrl: './img/11.jpg',
                    description: 'èŒ‚å¿æ—åœºä½äºå››å·åŒ—éƒ¨ï¼Œæ˜¯æš–æ¸©å¸¦è½å¶é’ˆå¶æ··äº¤æ—çš„é‡è¦åŒºåŸŸã€‚'
                },
                {
                    name: 'å“€ç‰¢å±±äºšçƒ­å¸¦å¸¸ç»¿é˜”å¶æ—æ—åœº',
                    position: [101.712251, 25.040609],
                    iconUrl: './img/12.jpg',
                    description: 'å“€ç‰¢å±±æ—åœºæ˜¯ä¸­å›½è¥¿å—åœ°åŒºé‡è¦çš„äºšçƒ­å¸¦å¸¸ç»¿é˜”å¶æ—ä¿æŠ¤åŒºã€‚'
                },
                {
                    name: 'é¼æ¹–å±±äºšçƒ­å¸¦å¸¸ç»¿é’ˆé˜”æ··äº¤æ—æ—åœº',
                    position: [113.280637, 23.125178],
                    iconUrl: './img/13.jpg',
                    description: 'é¼æ¹–å±±æ—åœºæ˜¯ä¸­å›½å—æ–¹é‡è¦çš„ç”Ÿæ€ä¿æŠ¤åŒºï¼Œä»¥äºšçƒ­å¸¦å¸¸ç»¿é’ˆé˜”æ··äº¤æ—ä¸ºä¸»ã€‚'
                }
            ];

            // æ·»åŠ æ—åœºæ ‡æ³¨
            forests.forEach(forest => {
                const marker = new AMap.Marker({
                    position: forest.position,
                    title: forest.name,
                    map: map,
                    cursor: 'pointer',
                    icon: new AMap.Icon({
                        size: new AMap.Size(30, 40),
                        image: forest.iconUrl,
                        imageSize: new AMap.Size(30, 40)
                    }),
                    label: {
                        content: forest.name,
                        offset: getLabelOffset(forest.position),
                        direction: 'right',
                        style: {
                            fontSize: '14px',
                            fontWeight: 'bold',
                            color: '#fff',
                            backgroundColor: 'rgba(0,0,0,0.6)',
                            padding: '5px',
                            borderRadius: '5px'
                        }
                    }
                });

                // ç‚¹å‡»æ ‡æ³¨æ”¾å¤§åˆ°è¯¥ä½ç½®
                marker.on('click', function () {
                    map.setZoomAndCenter(10, forest.position);
                });
            });

            // åŠ¨æ€è°ƒæ•´æ ‡ç­¾åç§»é‡
            function getLabelOffset(position) {
                const [lng, lat] = position;
                if (lng < 110) {
                    return new AMap.Pixel(20, -10);
                } else if (lng < 120) {
                    return new AMap.Pixel(40, -20);
                } else {
                    return new AMap.Pixel(60, -30);
                }
            }

            // åœ°å›¾ç¼©æ”¾æ—¶åŠ¨æ€è°ƒæ•´æ ‡ç­¾åç§»é‡
            map.on('zoomend', function () {
                forests.forEach(forest => {
                    const marker = map.getMarker(forest.name);
                    if (marker) {
                        marker.setLabel({
                            offset: getLabelOffset(forest.position)
                        });
                    }
                });
            });

            // ç”Ÿæˆæ—åœºåˆ—è¡¨
            const forestListContent = document.querySelector('.forest-list-content');
            forests.forEach(forest => {
                const listItem = document.createElement('div');
                listItem.className = 'forest-list-item';
                listItem.innerHTML = `
                    <h3>${forest.name}</h3>
                    <p>${forest.description}</p>
                `;
                listItem.onclick = () => {
                    map.setZoomAndCenter(10, forest.position); // ç‚¹å‡»åˆ—è¡¨é¡¹æ—¶è·³è½¬åˆ°å¯¹åº”ä½ç½®
                };
                forestListContent.appendChild(listItem);
            });
        </script>
    </div>
</body>

</html>